2021-02-05 Riddler Classic
==========================
It's not clear whether solving means moving the discs to either of the
other poles or to a particular pole.  I assume it's moving to either of
the other poles since that makes the solution more tractable.

When all the discs are on the same pole, there are 2 valid moves.

When there are discs on two or three poles, there are 3 valid moves:
* move the smallest onto the largest/empty
* move the middle onto the largest/empty
* move the middle onto the smallest

For the positions with 3 valid moves, there is a 1/3 chance of moving to
each of 3 other positions, so the average number of moves to solve
from that position would be 1+1/3×(sum of the average number of moves to
solve from the 3 other positions).

So, from the start position, it is 1+1/2×(sum of the average number of moves
to solve from the 2 accessible positions (which should be equal)).

For the end positions, it is 0.

This makes a set of linear equations, or a big sparse matrix.

For the 3-disc case, the equations are
```
m_{,,123} = 0
m_{,1,23} - m_{,,123}/3 - m_{1,,23}/3 - m_{2,1,3}/3 = 1
m_{,2,13} - m_{,12,3}/3 - m_{1,2,3}/3 - m_{2,,13}/3 = 1
m_{,12,3} - m_{,2,13}/3 - m_{1,2,3}/3 - m_{3,12,}/3 = 1
m_{,3,12} - m_{,13,2}/3 - m_{1,3,2}/3 - m_{3,,12}/3 = 1
m_{,13,2} - m_{,3,12}/3 - m_{1,3,2}/3 - m_{2,13,}/3 = 1
m_{,23,1} - m_{,123,}/3 - m_{1,23,}/3 - m_{2,3,1}/3 = 1
m_{,123,} = 0
m_{1,,23} - m_{,,123}/3 - m_{,1,23}/3 - m_{1,2,3}/3 = 1
m_{1,2,3} - m_{,12,3}/3 - m_{,2,13}/3 - m_{1,,23}/3 = 1
m_{1,3,2} - m_{,13,2}/3 - m_{,3,12}/3 - m_{1,23,}/3 = 1
m_{1,23,} - m_{,123,}/3 - m_{,23,1}/3 - m_{1,3,2}/3 = 1
m_{2,,13} - m_{,2,13}/3 - m_{12,,3}/3 - m_{2,1,3}/3 = 1
m_{2,1,3} - m_{,1,23}/3 - m_{12,,3}/3 - m_{2,,13}/3 = 1
m_{2,3,1} - m_{,23,1}/3 - m_{12,3,}/3 - m_{2,13,}/3 = 1
m_{2,13,} - m_{,13,2}/3 - m_{12,3,}/3 - m_{2,3,1}/3 = 1
m_{12,,3} - m_{12,3,}/3 - m_{2,,13}/3 - m_{2,1,3}/3 = 1
m_{12,3,} - m_{12,,3}/3 - m_{2,13,}/3 - m_{2,3,1}/3 = 1
m_{3,,12} - m_{,3,12}/3 - m_{13,,2}/3 - m_{3,1,2}/3 = 1
m_{3,1,2} - m_{13,,2}/3 - m_{23,1,}/3 - m_{3,,12}/3 = 1
m_{3,2,1} - m_{13,2,}/3 - m_{23,,1}/3 - m_{3,12,}/3 = 1
m_{3,12,} - m_{,12,3}/3 - m_{13,2,}/3 - m_{3,2,1}/3 = 1
m_{13,,2} - m_{13,2,}/3 - m_{3,,12}/3 - m_{3,1,2}/3 = 1
m_{13,2,} - m_{13,,2}/3 - m_{3,12,}/3 - m_{3,2,1}/3 = 1
m_{23,,1} - m_{123,,}/3 - m_{23,1,}/3 - m_{3,2,1}/3 = 1
m_{23,1,} - m_{123,,}/3 - m_{23,,1}/3 - m_{3,1,2}/3 = 1
m_{123,,} - m_{23,,1}/2 - m_{23,1,}/2 = 1
```
Due to symmetry when moving to either of the other poles is a solution,
m_{x,y,z} = m_{x,z,y}.
```
m_{,2,13} - m_{,3,12}/3 - m_{1,3,2}/3 - m_{2,13,}/3 = 1
m_{,3,12} - m_{,2,13}/3 - m_{1,3,2}/3 - m_{3,12,}/3 = 1
m_{,23,1} - m_{,123,}/3 - m_{1,23,}/3 - m_{2,3,1}/3 = 1
m_{,123,} = 0
m_{1,3,2} - m_{,2,13}/3 - m_{,3,12}/3 - m_{1,23,}/3 = 1
m_{1,23,} - m_{,123,}/3 - m_{,23,1}/3 - m_{1,3,2}/3 = 1
m_{2,3,1} - m_{,23,1}/3 - m_{12,3,}/3 - m_{2,13,}/3 = 1
m_{2,13,} - m_{,2,13}/3 - m_{12,3,}/3 - m_{2,3,1}/3 = 1
m_{12,3,} - m_{12,3,}/3 - m_{2,13,}/3 - m_{2,3,1}/3 = 1
m_{3,2,1} - m_{13,2,}/3 - m_{23,1,}/3 - m_{3,12,}/3 = 1
m_{3,12,} - m_{,3,12}/3 - m_{13,2,}/3 - m_{3,2,1}/3 = 1
m_{13,2,} - m_{13,2,}/3 - m_{3,12,}/3 - m_{3,2,1}/3 = 1
m_{23,1,} - m_{123,,}/3 - m_{23,1,}/3 - m_{3,2,1}/3 = 1
m_{123,,} - m_{23,1,}/2 - m_{23,1,}/2 = 1
```

I could solve this by hand, but my attempt was too error-prone, so
I'll write code to do it.  Rather than download and install some linear
algebra package, I'll just do a simple-minded upper-triangularization,
which ought to give the answer if I make sure the start state is the
right-most column.

The [code](20210205c.hs) gives 637/9, or about 70.78, moves for the
3-disc case.

For the 4-disc case, it's 10880/27, or about 402.96, moves.

For the 5-disc case, it's 174361/81, or about 2152.60, moves.

For the 6-disc case, it's 2711072/243, or about 11156.67, moves.

For 3-discs and 4 poles, it's 23947/360, or about 66.52, moves.

Now consider the case where the solution is a particular pole rather than any
pole other than the start pole.  Let m_a be the average number of moves to
any pole, and m_p be the average number of moves to a particular pole.

In the 3-pole case, 1/2 of the time m_a moves solves it, and 1/2 the time
m_a moves another m_p moves is needed, or m_p = m_a/2 + (m_a + m_p)/2,
so m_p = 2m_a.

In the 4-pole case, m_p = m_a/3 + 2(m_a + m_p)/3, or m_p = 3m_a.

Generating the full matrix and calculating the average moves for a particular
target pole confirms this for the 3-disc, 4-disc, and 3-disc with 4 poles
cases.
