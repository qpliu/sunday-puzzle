2021-11-19 Riddler Classic
==========================
Let's call the people N, S, E, and W, where N can see E and W, E can see
N and S, S can see W and E, and E can see S and N.

Let's call cN the color of N's hat, cS the color of S's hat, cE the color of
E's hat, and cW the color of W's hat.

Let's call the colors r, y, and b, and define + such that r+y=y+r=b, y+b=b+y=r,
b+r=r+b=y, r+r=r, y+y=y, b+b=b.  Define >r=y, <r=b, >y=b, <y=r, >b=r, <b=y.

Let's call gN N's guess, gS S's guess, gE E's guess, and gW W's guess.

I'm guessing that the key is that at least two of the hats have the same
color.

Start with N.  There are 3 distinct options for a guess: a fixed guess,
cE, or cE+cW.  (>cE, <cE, cW, >cW, <cW, >cE+cW, <cE+cW, as well as >fixed
and <fixed are not distinct from the 3 options until we know what
the other people are guessing.)

Also, N either sees two different color hats or two hats
with the same color.  Since S sees the same two hats, S will know N's guess.

If N sees two colors, N and S know that either both N and S have the third
color, or either N or S has one of the two colors.  If N guesses cE+cW, that
will cover the case where they both have the third color.  The cases are
* cN=cE cS=cE, E and W see one color
* cN=cE cS=cW, E and W see two colors
* cN=cE cS=cE+cW, E and W see two colors
* cN=cW cS=cE, E and W see two colors
* cN=cW cS=cW, E and W see one color
* cN=cW cS=cE+cW, E and W see two colors
* cN=cE+cW cS=cE, E and W see two colors
* cN=cE+cW cS=cW, E and W see two colors
* cN=cE+cW cS=cE+cW, E and W see one color

If gN=cE+cW and gS=cE+cW, the remaining cases are
* cN=cE cS=cE, E and W see one color
* cN=cE cS=cW, E and W see two colors
* cN=cW cS=cE, E and W see two colors
* cN=cW cS=cW, E and W see one color

If E and W see two colors, both E and W guess cN, and the remaining cases are
* cN=cE cS=cE, E and W see one color
* cN=cW cS=cW, E and W see one color

If E and W see one color, both E and W guess cN=cS, that takes care of the
remaining cases when cEâ‰ cW.

If N sees one color, the cases are, given the previous rules for E and W
* cN=cE, cS=cE, E and W see one color - E and W guess right
* cN=cE, cS=>cE, E and W see two colors - E and W guess right
* cN=cE, cS=<cE, E and W see two colors - E and W guess right
* cN=>cE, cS=cE, E and W see two colors
* cN=>cE, cS=>cE, E and W see one color
* cN=>cE, cS=<cE, E and W see two colors
* cN=<cE, cS=cE, E and W see two colors
* cN=<cE, cS=>cE, E and W see two colors
* cN=<cE, cS=<cE, E and W see one color

If gN=>cE and gS=>cE, the remaining cases are
* cN=<cE, cS=cE, E and W see two colors - this fails
* cN=<cE, cS=<cE, E and W see one color - this fails

I'm not seeing how to do it, so I wrote [code](20211119c.hs) to do a
brute-force search through 26,873,856 combinations of strategies, and failed
to find one that escapes.

The strategies are:
* when seeing 1 color (6)
** guess a fixed color (3)
** guess the seen color, or one of the other two colors (3)
* when seeing 2 colors (12)
** guess a fixed color (3)
** guess the color on the left, or one of the other two colors (3)
** guess the color on the right, or one of the other two colors (3)
** guess the color that's neither the left or right, or one of the other two colors (3)

That gives 72 strategies, and 26,873,856 combinations of four of them.
