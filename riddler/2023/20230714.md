2023-07-14 Fiddler
==================
One of the operations would be dividing by 1, which should be generated by
subtracting 1 from 2.  The addition should be done before the multiplication,
and should add the two smaller numbers.  That makes largest value
(3+4)×5÷(2-1) = 35.

Extra credit
------------
When there are 2 of each operation, division after dividing by 1 is
multiplication, and that would use up the 1 and the two divisions.

Two subtractions could essentially turn the 2 into a -2.

That leaves -2, 3, 4, 5, 6, 7, 8, 9, with four additions and three
multiplications, where the -2 needs to be added to the sum of two of the
numbers.  Doing the additions to make the four sums as close to each other
as possible gives 9×(8+5-2)×(7+3)×(6+4) = 9900.  In other words,
9×(8-(2-5))×(7+3)÷(1÷(6+4)) = 9900.

When are $N$ of each operation, if $N$ is even, let $N = 2n$.  Use $n-1$
subtractions to make $n-1$ ones, which, with the original 1, can turn the
$2n$ divisions into $n$ multiplications.  Then, with the $n+1$ subtractions
and $2n$ additions, make $3n+1$ sums that are as close to each other as
possible.  The resulting value will be the product of these sums.

If $N$ is odd, let $N = 2n+1$.  Use $n$ subtractions to make $n$ ones, which
can turn $2n$ divisions into $n$ multiplications.  The last division will be
to divide by the original 1.  Then, with the $n+1$ subtractions and $2n+1$
additions, make $3n+2$ sums that are as close to each other as possible.
The resulting value will be the product of these sums.

If $n+1$ is even, let $n+1 = 2m$, there must be $m$ negative numbers in the
the $3n+1$ or $3n+2$ sums, and the sums with the negative numbers need at
least two positive numbers.

If $n+1$ is odd, let $n+1 = 2m+1$, there must be $m+1$ negative numbers in
the $3n+1$ or $3n+2$ sums, and, except for one of them that needs at least
one positive number, the sums with negative numbers need at least two
positive numbers.

Restating the cases, $N = 4m$, $N = 4m+1$, $N = 4m+2$, or $N = 4m+3$.

If $N = 4m$, use $2m-1$ subtractions to make $2m-1$ ones, which, with the
original 1, can turn the divisions into $2m$ multiplications.  There are
$2m+1$ remaining subtractions and $4m$ additions to make $6m+1$ sums that
are as close to each other as possible.  One of the subtractions will be
to subtract 2.  The other $2m$ subtractions will be to subtract
$3, 4, \ldots m+2$ from the sum of two other numbers.  Now, it's clear that
$m+3, m+4, m+5, m+6, m+7, m+8, \ldots 5m-1, 5m$ will be used to make the
$2m-1$ ones that turn the divisions into multiplications.  So
$2, 3, \ldots m+2$ will be negative numbers and
$5m+1, 5m+2 \ldots 16m+1$ will be positive numbers in the $6m+1$ sums.

Other than the ones, there are $12m+2$ numbers that will, with $2m+1$
subtractions and $4m$ additions, result in the $6m+1$ numbers.  Use the
additions to add $(5m+1) + (15m), (5m+2) + (15m-1), \ldots (9m) + (11m+1)$,
and use pairs of subtractions to make
$(9m+1) - (3 - (11m)), (9m+2) - (4 - (11m-1)), \ldots (10m) - ((m+2) - (10m+1))$.  The last subtraction will turn one of the $20m+1$ sums into $20m-1$.
The numbers $15m+1, 15m+2, \ldots 16m+1$ go directly into the product.
The result is

$$
  \frac{(16m+1)!}{(15m)!} \frac{(20m+1-3)!}{(19m-2)!} (20m-1)(20m+1)^{4m-1}
 = \frac{(4N+1)!(5N-2)!(19N/4-1)!(5N-1)(5N+1)^{N-1}}{(15N/4)!(19N/4-2)!}
$$

If $N = 4m+1$, use $2m$ subtractions to make $2m$ ones, which turn $4m$
divisions into $2m$ multiplications.  The last division divides a term by
the original 1.  There are $2m+1$ remaining subtractions and $4m+1$ additions
to make $6m+2$ sums that are as close to each other as possible.  One of the
subtractions will be to subtract 2.  The other $2m$ subtractions will be to
subtract $3, 4, \ldots m+2$ from the sum of two other numbers.  The
ones will be made from $m+3, m+4, m+5, m+6, \ldots 5m+1, 5m+2$, so
$2, 3, \ldots m+2$ will be negative numbers and $5m+3, 5m+4, \ldots 16m+5$
will be positive numbers in the $6m+2$ sums.  (I think $m=0$ is a special
case that can make a one from $2-1$, since there will be no more subtractions.)

Other than the ones, there are $12m+4$ numbers that will, with $2m+1$
subtractions and $4m+1$ additions, result in $6m+2$ numbers.  Use the additions
to add $(5m+3)+(15m+6), (5m+4)+(15m+5), \ldots (9m+4)+(11m+5)$, and use pairs
of subtractions to make
$(9m+5)-(3-(11m+6)), (9m+6)-(4-(11m+5)), \ldots (10m+5)-((m+2)-(10m+6))$.
The last subtraction turns one of the $20m+9$ sums into $20m+7$.  The
numbers $15m+7, 15m+8, \ldots 16m+5$ go directly into the product.
The result is

$$
  \frac{(16m+5)!}{(15m+6)!} \frac{(20m+8)!}{(19m+8)!} (20m+7)(20m+9)^{4m}
 = \frac{(4N+1)!(5N+2)(5N+4)^{N-1}}{(5N+3)!(19(N-1)/4+8)!}
$$

If $N = 4m+2$, use $2m$ subtractions to make $2m$ ones, which, with the
original 1, turns the divisions into $2m+1$ multiplications.  There are
$2m+2$ remaining subtractions and $4m+2$ additions to make $6m+4$ sums
that are as close to each other as possible.  The $2m+2$ subtractions will
subtract $2, 3, \ldots m+2$ from the sum of two other numbers.  The ones
will be made from $m+3, m+4, m+5, m+6, \ldots 5m+1, 5m+2$, so
$2, 3, \ldots m+2$ will be negative numbers and $5m+3, 5m+4, \ldots 16m+9$
will be positive numbers in the $6m+4$ sums.

Other than the ones, there are $12m+8$ numbers that will, with $2m+2$
subtractions and $4m+2$ additions, result in $6m+4$ numbers.  Use the additions
to make $(5m+3)+(15m+8), (5m+4)+(15m+7), \ldots (9m+4)+(11m+7)$, and use pairs
of subtractions to make
$(9m+5)-(2-(11m+6)), (9m+6-(3-(11m+5)), \ldots ((10m+5)-((m+2)-(10m+6))$.
The numbers $15m+9, 15m+10, \ldots 16m+9$ go directly into the product.
The result is

$$
  \frac{(16m+9)!}{(15m+8)!} \frac{(20m+9)!}{(19m+8)!} (20m+11)^{4m+2}
 = \frac{(4N+1)!(5N-1)!(5N+1)^N}{(15(N-2)/4+8)!(19(N-2)/4+8)!}
$$

which, when $N = 2$ is $\frac{9!9!11^2}{8!8!} = 9801$, which is less than
9900, so this doesn't work for small $N$, where it's possible to juggle the
some of the numbers around to make some of the sums closer to each other.

If $N = 4m+3$, use $2m+1$ subtractions to make $2m+1$ ones, which turn
$4m+2$ divisions into $2m+1$ multiplications.  The last division divides by
the original 1.  There are $2m+2$ remaining subtractions and $4m+3$ additions
to make $6m+5$ sums that are as close to each other as possible.  The
$2m+2$ subtractions will subtract $2, 3, \ldots m+2$ from the sum of two
other numbers.  The ones will be made from
$m+3, m+4, m+5, m+6, \ldots 5m+3, 5m+4$, so
$2, 3, \ldots m+2$ will be negative numbers and $5m+5, 5m+6, \ldots 16m+13$
will be positive numbers in the $6m+5$ sums.

Other than the ones, there are $12m+10$ numbers that will, with $2m+2$
subtractions and $4m+3$ additions, result in $6m+5$ numbers.  Use the additions
to make $(5m+5)+(15m+12), (5m+6)+(15m+11), \ldots (9m+7)+(11m+10)$, and use
pairs of subtractions to make
$(9m+8)-(2-(11m+9)), (9m+9)-(3-(11m+8)), \ldots (10m+9)-((m+2)-(10m+8))$.
The numbers $15m+13, 15m+14, \ldots 16m+13$ go directly into the product.
The result is

$$
  \frac{(16m+13)!}{(15m+12)!} \frac{(20m+15)!}{(19m+14)!} (20m+17)^{4m+3}
 = \frac{(4N+1)!(5N)!(5N+2)^N}{(15(N-3)/4+12)!(19(N-3)/4+14)!}
$$

Additional thought
------------------
Reconsidering how to distribute the additions and subtractions, due to
how the $N = 2$ case failed.  And I already know the $N = 1$ case fails.

When $N = 4m+2$, use additions to the make
$(5m+3)+(14m+7), (5m+4)+(14m+6), \ldots (9m+4)+(10m+6)$, and use pairs of
subtractions to make
$(9m+5)-(2-(15m+8)), (9m+6)-(3-(15m+7)), \ldots (10m+5)-((m+2)-(14m+8))$.
The result is

$$
  \frac{(16m+9)!}{(15m+8)!} \frac{(24m+11)!}{(23m+10)!} (19m+10)^{4m+2}
 = \frac{(4N+1)!(6N-1)!(19(N-2)/4+10)^N}{(15(N-2)/4+8)!(23(N-2)/4+10)!}
$$

which, when $N=2$ is $\frac{9!11!10^2}{8!10!} = 9900$.  However, for
$N = 6, 10, 14, \ldots$, the previous expression gives the greater result.

This makes me think that the previous expressions do not give the greatest
values for $N < 4$, due to being able to juggle the additions and subtractions
around to make the multiplicands closer to each other, but are likely,
barring mistakes, to give the greatest values for $N \ge 4$.

The $N = 3$ case
----------------
For $N = 3$, make a one with $4-3$.  One of the divisions will be to divide
by one, the other two will become a multiplication.  The two remaining
subtractions will subtract 2 from the sum of two other numbers.  The numbers
are 1, 1, 2, 5, 6, 7, 8, 9, 10, 11, 12, and 13.  Use the additions and
subtractions to make 5+11, 6+10, 7+9, 12-(2-8).  Then, multiply them with
13, giving (5+11)×(6+10)×(7+9)×(12-(2-8))÷(1÷13)÷(4-3) = 958464.  The
previous expression would give
(5+12)×(6+11)×(7+10)×(9-(2-8))÷(1÷13)÷(4-3) = 958035, but I think it would
give the greatest values for $N = 7, 11, 15, \ldots$

Tabulating
----------

|n||
|-|-|
|1|35|
|2|9900|
|3|958464|
|4|861495264|
|5|534704436|
|6|432391793383200|
|7|91730774236075240|
|8|349592846036241322944|
|9|130378901483769529584|
|10|841676867746393715219514240|
|11|276560006764231664969171668200|
|12|2416930042448592979356427644980736|
|13|646652194476781702656102872385312|
|14|16270951694900265826065169453001565394560|
|15|7245532483851765238180051941677326410288000|

I probably made some mistake, since the values for $N = 4m + 1$ are less than
the values for $N = 4m$.
