2024-04-26 Fiddler
==================
If player A's total is $a$, then player B spins once if $b > a$, where $b$
is player B's first spin, and spins twice if $b < a$.  The edge cases where
$b = a$ or other spins or sums of spins are equal are irrelevant for these
calculations.  The probability that B wins on the first spin is $1-a$.
Otherwise, B must spin at least $a-b$ and no more than $1-b$ to win
on the second spin, which has probability $1-a$.  So, given $a < 1$, the
probability that B wins is $1-a^2$.

If player A's first spin is $a_1$, the probability of losing without a
second spin is $1-a_1^2$.  When spinning twice, the probability of
immediately losing is $a_1$, otherwise, the second spin is $a_2 < 1-a_1$
and the probability of losing is then $1-(a_1+a_2)^2$.  So, given $a_1$,
the probability of losing after spinning twice is

$$ a_1 + (1-a_1)\int_0^{1-a_1} da_2 (1 - (a_1+a_2)^2)
 = a_1 + (1-a_1)^3(2+a_1)/3 $$

So player A should spin twice if the first spin is less than $x$, where
$1 - x^2 = x + (1-x)^3(2+x)/3$, or $x \approx 0.5913548$.  There
are four real roots to $x^4 - x^3 - 6x^2 + 2x + 1 = 0$, and one
of the roots is between zero and one, which is the relevant root.

So the probability of losing is

$$ \int_0^x da (a + (1-a)^3(2+a)/3) + \int_x^1 da (1-a^2)
  = 2/3 - x/3 - x^2/3 + 2x^3/3 + x^4/12 - x^5/15 $$

which is minimized at approximately 49.6216% when $x \approx 0.5913548$,
so the probability of winning is approximately 50.3784%.  I did not expect
it to be greater than 50%.

Solving the quartic equation, a closed-form expression for $x$ is

$$ x = \frac{1}{4} + S - \frac{1}{2}\sqrt{-4S^2 + \frac{51}{4} + \frac{9}{8S}} $$

where $S = \frac{1}{4}\sqrt{17 + 8\sqrt6\cos\left(\frac{\cos^{-1}(1/\sqrt{864})}{3}\right)} \approx 1.45946$.

Extra credit
------------
If player B's first spin is less than $a$, player B will make a second spin.
If player B's first spin is more than $a$, but less than $x$, player B will
make a second spin.  If player B's first spin is more than $x$, player B will
not make a second spin and whether player B or player C wins is irrelevant.

The probability that player B will not make a second spin is $1-x$, and the
probability that players C wins is $1-b^2$, which is relevant to determine
what $x$ is.

The probability that, after player B's second spin, $b < a$ or $b > 1$, is
$\int_0^a db_1(a-b_1) + \int_0^x db_1 b_1 = a^2/2 + x^2/2$.  The probability
that player C wins is then $1-a^2$.

The probability that $a < b < 1$ after two spins is
$\int_0^x db_1 (1-b_1) = x-x^2/2$, and the probability that player C wins
is $1-b^2$.

So the probability that player B loses is
$$
  \int_x^1 db(1-b^2) + (a^2/2 + x^2/2)
  + \int_0^a db_1 \int_{a-b_1}^{1-b_1} db_2 (1-(b_1+b_2)^2)
  + \int_a^x db_1 \int_0^{1-b_1} db_2 (1-(b_1+b_2)^2)
$$

And I keep making mistakes trying to do these integrals, so I'll stop here.
Maybe I'll be able to do it numerically later.

If I could be confident in doing these integrals, I'd get a polynomial
in $a$ and $x$, for which, given $a$, I would find $a < x = X(a) < 1$ that
minimizes the polynomial, which is the probability that B loses.

Then, player A would spin once if the first spin is $y$ or greater, and spin
twice if the first spin is less than $y$.

If player A's first spin is $a$, the probability of losing without
a second spin is

$$ 1-X(a) + X(a)-X(a)^2/2 + (a^2/2+X(a)^2/2)(1-a^2) $$

If player A spins twice, the probability of losing is then

$$ a + \int_0^{1-a} da_2 (1-X(a_2)^2/2 + (a_2^2/2 + X(a_2)^2/2)(1-a_2^2)) $$

The probability that player A loses is then

$$ \int_y^1 da(1 - X(a)/2 + (a^2/2+X(a)^2/2)(1-a^2))
  + \int_0^y da (a + \int_0^{1-a} da_2 (1-X(a_2)^2/2 + (a_2^2/2 + X(a_2)^2/2)(1-a_2^2)))
$$

Then I'd find its minimum for $0 < y < 1$, which would be player A's
probability of losing.
